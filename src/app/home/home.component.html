<main class="home">
  <div class="d-flex flex-column flex-md-row justify-content-between">
    <div class="search-group c-mb-3">
      <span class="search-addon" id="basic-addon1">
        <i class="bi bi-search"></i>
      </span>
      <input
        #searchInput
        type="text"
        class="search-input shadow-sm bg-element"
        placeholder="Search for a country..."
        aria-label="Search for a country"
        aria-describedby="basic-addon1"
        (keyup)="search(searchInput.value)"
      />
    </div>
    <div class="c-mb-3">
      <div class="btn-group shadow-sm" dropdown>
        <button
          id="button-basic"
          dropdownToggle
          type="button"
          class="btn bg-element dropdown-toggle"
          aria-controls="dropdown-basic"
        >
          Filter by region
        </button>
        <ul
          id="dropdown-basic"
          *dropdownMenu
          class="dropdown-menu"
          role="menu"
          aria-labelledby="button-basic"
        >
          <li role="menuitem" *ngFor="let r of regions" (click)="setFilter(r)">
            <a class="dropdown-item">{{ r }}</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div>
    <div
      *ngIf="filteredCountries$ | async as countries; else noData"
      class="row row-cols-1 row-cols-md-4 justify-content-around g-4"
    >
      <div
        class="card col p-0 bg-element border-0 shadow-sm"
        style="width: 16.5rem"
        *ngFor="let c of countries; trackBy: countriesTrack"
        (click)="navigateToDetials(c)"
      >
        <img
          [src]="c.flags.png"
          height="160px"
          width="100%"
          class="card-img-top"
          alt="{{ c.flags.alt }}"
        />
        <div class="card-body">
          <h5 class="card-title c-fw-800">{{ c.name.common }}</h5>
          <div class="card-text">
            <div class="detail c-fw-300">
              <span class="detail-label c-fw-500 pe-1">Population:</span
              >{{ c.population }}
            </div>
            <div class="detail c-fw-300">
              <span class="detail-label c-fw-500 pe-1">Region:</span
              >{{ c.region }}
            </div>
            <div class="detail c-fw-300">
              <span class="detail-label c-fw-500 pe-1">Capital:</span
              >{{ c.capital }}
            </div>
          </div>
        </div>
      </div>
    </div>
    <ng-template #noData>
      <div class="d-flex justify-content-center">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </ng-template>

    <!-- {{ countries$ | async | json }} -->
  </div>
</main>
